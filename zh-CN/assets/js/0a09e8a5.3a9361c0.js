"use strict";(self.webpackChunkdora_rs_github_io=self.webpackChunkdora_rs_github_io||[]).push([[5118],{37100:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>a,contentTitle:()=>d,default:()=>u,frontMatter:()=>o,metadata:()=>s,toc:()=>l});var t=r(74848),i=r(28453);const o={},d="\u865a\u62df\u73af\u5883",s={id:"guides/Development/virtual-environment",title:"\u865a\u62df\u73af\u5883",description:"run \u547d\u4ee4",source:"@site/i18n/zh-CN/docusaurus-plugin-content-docs/current/guides/Development/virtual-environment.md",sourceDirName:"guides/Development",slug:"/guides/Development/virtual-environment",permalink:"/zh-CN/docs/guides/Development/virtual-environment",draft:!1,unlisted:!1,editUrl:"https://crowdin.com/dora-rs/zh-CN",tags:[],version:"current",frontMatter:{},sidebar:"guides",previous:{title:"\u70ed\u52a0\u8f7d",permalink:"/zh-CN/docs/guides/Development/hot-reload"},next:{title:"\u65e5\u5fd7",permalink:"/zh-CN/docs/guides/Debugging/logs"}},a={},l=[{value:"<code>run</code> \u547d\u4ee4",id:"run-\u547d\u4ee4",level:2},{value:"<code>start</code> \u547d\u4ee4",id:"start-\u547d\u4ee4",level:2},{value:"Setting an arbitrary environment",id:"setting-an-arbitrary-environment",level:2},{value:"\u4f7f\u7528 <code>uv</code> \u4e0e <code>--uv</code> \u6807\u5fd7",id:"\u4f7f\u7528-uv-\u4e0e---uv-\u6807\u5fd7",level:2}];function c(e){const n={code:"code",h1:"h1",h2:"h2",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{id:"\u865a\u62df\u73af\u5883",children:"\u865a\u62df\u73af\u5883"}),"\n",(0,t.jsxs)(n.h2,{id:"run-\u547d\u4ee4",children:[(0,t.jsx)(n.code,{children:"run"})," \u547d\u4ee4"]}),"\n",(0,t.jsx)(n.p,{children:"\u5f53\u4f7f\u7528 dora \u7684 run \u547d\u4ee4\u65f6\uff0c\u6574\u4f53 python \u73af\u5883\u5c06\u88ab\u5f53\u524d\u73af\u5883\u6301\u6709\u3002"}),"\n",(0,t.jsx)(n.p,{children:"\u5728\u4f7f\u7528 dora \u524d\uff0c\u60a8\u53ef\u4ee5\u6fc0\u6d3b\u76f8\u9002\u5e94\u7684\u73af\u5883\u3002"}),"\n",(0,t.jsx)(n.p,{children:"\u60a8\u53ef\u4ee5\u786e\u8ba4"}),"\n",(0,t.jsxs)(n.h2,{id:"start-\u547d\u4ee4",children:[(0,t.jsx)(n.code,{children:"start"})," \u547d\u4ee4"]}),"\n",(0,t.jsx)(n.p,{children:"\u5f53\u4f7f\u7528dora\u7684 start \u547d\u4ee4\uff0c\u60a8\u9700\u8981\u786e\u8ba4\u5728\u5408\u9002\u7684\u73af\u5883\u4e2d deamon \u662f\u6b63\u5728\u8fd0\u884c\u7684\u3002"}),"\n",(0,t.jsxs)(n.p,{children:["\u6b64\u884c\u4e3a\u662f\u5728 ",(0,t.jsx)(n.code,{children:"dora up"})," \u547d\u4ee4\u4e2d\u5904\u7406\u7684\u3002"]}),"\n",(0,t.jsxs)(n.p,{children:["\u82e5\u641e\u4e0d\u6e05\u695adora\u7684deamon\u72b6\u6001\uff0c\u53ef\u4ee5\u5728\u73af\u5883\u4e2d\u4f7f\u7528 ",(0,t.jsx)(n.code,{children:"dora destroy && dora up"}),"\u53cd\u590d\u786e\u8ba4\u3002"]}),"\n",(0,t.jsx)(n.h2,{id:"setting-an-arbitrary-environment",children:"Setting an arbitrary environment"}),"\n",(0,t.jsxs)(n.p,{children:["You can overwrite an environment using the ",(0,t.jsx)(n.code,{children:"VIRTUAL_ENV"})," environment variable within the dataflow specification:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"- id: llm\n  build: |\n    pip install flash-attn --no-build-isolation\n    pip install -e ../../node-hub/dora-phi4\n  path: dora-phi4\n  inputs:\n    text: input/text\n  outputs:\n    - text\n  env:\n    VIRTUAL_ENV: /home/peter/Documents/work/dora/node-hub/dora-phi4/.venv\n"})}),"\n",(0,t.jsx)(n.p,{children:"And run your datflow with uv:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"dora run dataflow.yml --uv\n"})}),"\n",(0,t.jsxs)(n.h2,{id:"\u4f7f\u7528-uv-\u4e0e---uv-\u6807\u5fd7",children:["\u4f7f\u7528 ",(0,t.jsx)(n.code,{children:"uv"})," \u4e0e ",(0,t.jsx)(n.code,{children:"--uv"})," \u6807\u5fd7"]}),"\n",(0,t.jsx)(n.p,{children:"\u4e3a\u907f\u514d\u6fc0\u6d3b\u548c\u9000\u51fa\u73af\u5883\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528\u5982\u4e0b\u521b\u5efa\u4e00\u4e2a\u73af\u5883\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"uv venv\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u5e76\u5982\u4e0b \u8fd0\u884c dora \u76f8\u5173\u547d\u4ee4 \u6fc0\u6d3b\u73af\u5883\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"dora build dataflow.yml --uv\ndora run dataflow.yml --uv\n"})})]})}function u(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},28453:(e,n,r)=>{r.d(n,{R:()=>d,x:()=>s});var t=r(96540);const i={},o=t.createContext(i);function d(e){const n=t.useContext(o);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:d(e.components),t.createElement(o.Provider,{value:n},e.children)}}}]);