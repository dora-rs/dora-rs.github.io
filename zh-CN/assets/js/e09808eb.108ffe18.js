"use strict";(self.webpackChunkdora_rs_github_io=self.webpackChunkdora_rs_github_io||[]).push([[3286],{978:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>i,default:()=>u,frontMatter:()=>s,metadata:()=>d,toc:()=>a});var o=t(4848),r=t(8453);const s={},i="Webcam (\u6444\u50cf\u5934) \u64cd\u4f5c\u7b26",d={id:"nodes_operators/webcam_op",title:"Webcam (\u6444\u50cf\u5934) \u64cd\u4f5c\u7b26",description:"\u8f93\u5165",source:"@site/i18n/zh-CN/docusaurus-plugin-content-docs/current/nodes_operators/webcam_op.md",sourceDirName:"nodes_operators",slug:"/nodes_operators/webcam_op",permalink:"/zh-CN/docs/nodes_operators/webcam_op",draft:!1,unlisted:!1,editUrl:"https://crowdin.com/dora-rs/zh-CN",tags:[],version:"current",frontMatter:{},sidebar:"nodes_operators",previous:{title:"Strong Sort (strong deep learning for simple online and realtime tracking, \u5f3a\u5316\u6df1\u5ea6\u5b66\u4e60\u7f51\u7edc\u7684\u7b80\u5355\u5728\u7ebf\u4e0e\u5b9e\u65f6\u8ddf\u8e2a) \u64cd\u4f5c\u7b26",permalink:"/zh-CN/docs/nodes_operators/strong_sort_op"},next:{title:"yolop \u64cd\u4f5c\u7b26",permalink:"/zh-CN/docs/nodes_operators/yolop_op"}},c={},a=[{value:"\u8f93\u5165",id:"\u8f93\u5165",level:2},{value:"\u8f93\u51fa",id:"\u8f93\u51fa",level:2},{value:"\u914d\u7f6e",id:"\u914d\u7f6e",level:2},{value:"\u56fe\u63cf\u8ff0",id:"\u56fe\u63cf\u8ff0",level:2},{value:"\u65b9\u6cd5",id:"\u65b9\u6cd5",level:2},{value:"<code>__init__()</code>",id:"__init__",level:3},{value:"<code>.on_event(...)</code>",id:"on_event",level:3},{value:"<code>.on_input(...)</code>",id:"on_input",level:3}];function l(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components},{Details:t}=n;return t||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.h1,{id:"webcam-\u6444\u50cf\u5934-\u64cd\u4f5c\u7b26",children:"Webcam (\u6444\u50cf\u5934) \u64cd\u4f5c\u7b26"}),"\n",(0,o.jsx)(n.h2,{id:"\u8f93\u5165",children:"\u8f93\u5165"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"tick: Dora tick."}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"\u8f93\u51fa",children:"\u8f93\u51fa"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"\u56fe\u50cf: \u9ad8 x \u5bbd x BGR array."}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"\u914d\u7f6e",children:"\u914d\u7f6e"}),"\n",(0,o.jsxs)(n.p,{children:["\u4f7f\u7528 cv2 \u5305\u83b7\u53d6\u6444\u50cf\u5934\u56fe\u50cf\u3002 \u6444\u5934\u53f7\u53ef\u88ab\u4f7f\u7528 ",(0,o.jsx)(n.code,{children:"CAMERA_INDEX"})," \u914d\u7f6e"]}),"\n",(0,o.jsx)(n.h2,{id:"\u56fe\u63cf\u8ff0",children:"\u56fe\u63cf\u8ff0"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",children:"  - id: yolov5\n    operator: \n      outputs:\n        - bbox\n      inputs:\n        image: webcam/image\n      python: ../../operators/webcam_op.py\n"})}),"\n",(0,o.jsx)(n.h2,{id:"\u65b9\u6cd5",children:"\u65b9\u6cd5"}),"\n",(0,o.jsx)(n.h3,{id:"__init__",children:(0,o.jsx)(n.code,{children:"__init__()"})}),"\n",(0,o.jsxs)(t,{children:[(0,o.jsx)("summary",{children:"\u6e90\u7801"}),(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:"    def __init__(self):\n        self.video_capture = cv2.VideoCapture(int(DEVICE_INDEX))\n        self.video_capture.set(cv2.CAP_PROP_FRAME_WIDTH, OUTPUT_WIDTH)\n        self.video_capture.set(cv2.CAP_PROP_FRAME_HEIGHT, OUTPUT_HEIGHT)\n\n\n"})})]}),"\n",(0,o.jsx)(n.h3,{id:"on_event",children:(0,o.jsx)(n.code,{children:".on_event(...)"})}),"\n",(0,o.jsxs)(t,{children:[(0,o.jsx)("summary",{children:"\u6e90\u7801"}),(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:'\n    def on_event(\n        self,\n        dora_event: dict,\n        send_output: Callable[[str, bytes], None],\n    ) -> DoraStatus:\n        if dora_event["type"] == "INPUT":\n            return self.on_input(dora_event, send_output)\n        return DoraStatus.CONTINUE\n\n\n'})})]}),"\n",(0,o.jsx)(n.h3,{id:"on_input",children:(0,o.jsx)(n.code,{children:".on_input(...)"})}),"\n",(0,o.jsxs)(t,{children:[(0,o.jsx)("summary",{children:"\u6e90\u7801"}),(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:'\n    def on_input(\n        self,\n        dora_input: dict,\n        send_output: Callable[[str, bytes], None],\n    ):\n        ret, frame = self.video_capture.read()\n        if ret:\n            frame = cv2.resize(frame, (OUTPUT_WIDTH, OUTPUT_HEIGHT))\n            frame = cv2.cvtColor(frame, cv2.COLOR_BGR2BGRA)\n            send_output(\n                "image",\n                pa.array(frame.ravel()),\n                dora_input["metadata"],\n            )\n        else:\n            print("could not get webcam.")\n        return DoraStatus.CONTINUE\n\n\n'})})]})]})}function u(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(l,{...e})}):l(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>d});var o=t(6540);const r={},s=o.createContext(r);function i(e){const n=o.useContext(s);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),o.createElement(s.Provider,{value:n},e.children)}}}]);