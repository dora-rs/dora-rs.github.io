"use strict";(self.webpackChunkdora_rs_github_io=self.webpackChunkdora_rs_github_io||[]).push([[952],{3335:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>d,contentTitle:()=>i,default:()=>p,frontMatter:()=>s,metadata:()=>a,toc:()=>c});var t=o(4848),r=o(8453);const s={},i="Webcam operator",a={id:"nodes_operators/webcam_op",title:"Webcam operator",description:"Inputs",source:"@site/docs/nodes_operators/webcam_op.md",sourceDirName:"nodes_operators",slug:"/nodes_operators/webcam_op",permalink:"/docs/nodes_operators/webcam_op",draft:!1,unlisted:!1,editUrl:"https://github.com/dora-rs/dora-rs.github.io/edit/main/docs/nodes_operators/webcam_op.md",tags:[],version:"current",frontMatter:{},sidebar:"nodes_operators",previous:{title:"Strong Sort operator",permalink:"/docs/nodes_operators/strong_sort_op"},next:{title:"yolop operator",permalink:"/docs/nodes_operators/yolop_op"}},d={},c=[{value:"Inputs",id:"inputs",level:2},{value:"Outputs",id:"outputs",level:2},{value:"Configuration",id:"configuration",level:2},{value:"Graph Description",id:"graph-description",level:2},{value:"Methods",id:"methods",level:2},{value:"<code>__init__()</code>",id:"__init__",level:3},{value:"<code>.on_event(...)</code>",id:"on_event",level:3},{value:"<code>.on_input(...)</code>",id:"on_input",level:3}];function l(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components},{Details:o}=n;return o||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{id:"webcam-operator",children:"Webcam operator"}),"\n",(0,t.jsx)(n.h2,{id:"inputs",children:"Inputs"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"tick: Dora tick."}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"outputs",children:"Outputs"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"image: HEIGHTxWIDTHxBGR array."}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,t.jsxs)(n.p,{children:["Using cv2 package to get the webcam image. The webcam number can be configured using ",(0,t.jsx)(n.code,{children:"CAMERA_INDEX"})]}),"\n",(0,t.jsx)(n.h2,{id:"graph-description",children:"Graph Description"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"  - id: yolov5\n    operator: \n      outputs:\n        - bbox\n      inputs:\n        image: webcam/image\n      python: ../../operators/webcam_op.py\n"})}),"\n",(0,t.jsx)(n.h2,{id:"methods",children:"Methods"}),"\n",(0,t.jsx)(n.h3,{id:"__init__",children:(0,t.jsx)(n.code,{children:"__init__()"})}),"\n",(0,t.jsxs)(o,{children:[(0,t.jsx)("summary",{children:"Source Code"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"    def __init__(self):\n        self.video_capture = cv2.VideoCapture(int(DEVICE_INDEX))\n        self.video_capture.set(cv2.CAP_PROP_FRAME_WIDTH, OUTPUT_WIDTH)\n        self.video_capture.set(cv2.CAP_PROP_FRAME_HEIGHT, OUTPUT_HEIGHT)\n\n\n"})})]}),"\n",(0,t.jsx)(n.h3,{id:"on_event",children:(0,t.jsx)(n.code,{children:".on_event(...)"})}),"\n",(0,t.jsxs)(o,{children:[(0,t.jsx)("summary",{children:"Source Code"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'\n    def on_event(\n        self,\n        dora_event: dict,\n        send_output: Callable[[str, bytes], None],\n    ) -> DoraStatus:\n        if dora_event["type"] == "INPUT":\n            return self.on_input(dora_event, send_output)\n        return DoraStatus.CONTINUE\n\n\n'})})]}),"\n",(0,t.jsx)(n.h3,{id:"on_input",children:(0,t.jsx)(n.code,{children:".on_input(...)"})}),"\n",(0,t.jsxs)(o,{children:[(0,t.jsx)("summary",{children:"Source Code"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'\n    def on_input(\n        self,\n        dora_input: dict,\n        send_output: Callable[[str, bytes], None],\n    ):\n        ret, frame = self.video_capture.read()\n        if ret:\n            frame = cv2.resize(frame, (OUTPUT_WIDTH, OUTPUT_HEIGHT))\n            frame = cv2.cvtColor(frame, cv2.COLOR_BGR2BGRA)\n            send_output(\n                "image",\n                pa.array(frame.ravel()),\n                dora_input["metadata"],\n            )\n        else:\n            print("could not get webcam.")\n        return DoraStatus.CONTINUE\n\n\n'})})]})]})}function p(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},8453:(e,n,o)=>{o.d(n,{R:()=>i,x:()=>a});var t=o(6540);const r={},s=t.createContext(r);function i(e){const n=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);